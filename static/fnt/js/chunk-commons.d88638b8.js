(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-commons"],{"+quC":function(e,t,i){"use strict";var s=i("wlw9");i.n(s).a},"28av":function(e,t,i){"use strict";var s=i("Z2sE");i.n(s).a},"37fX":function(e,t,i){"use strict";var s=i("Od0w");i.n(s).a},"9CUv":function(e,t,i){},AX1P:function(e,t,i){"use strict";var s={name:"FilterPopover",props:{},data:function(){return{}},mounted:function(){},methods:{toggleVisible:function(){},handleBlur:function(){this.$refs.filterPopover.handleBlur()}}},n=(i("28av"),i("KHd+")),a=Object(n.a)(s,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-popover",{ref:"filterPopover",attrs:{"visible-arrow":!1,placement:"bottom","popper-class":"popover-filter",trigger:"click"}},[i("div",{staticClass:"filter-container"},[i("div",{staticClass:"filter-header"},[i("span",{staticClass:"search-option pull-right",attrs:{slot:"reference"},on:{click:e.handleBlur},slot:"reference"},[e._v("\n        "+e._s(e.$t("core.searchOptions"))+"\n        "),i("i",{staticClass:"el-icon-caret-top"})])]),e._v(" "),i("div",{staticClass:"filter-body"},[e._t("default")],2)]),e._v(" "),i("div",{staticClass:"search-option right-header-item",attrs:{slot:"reference"},slot:"reference"},[e._v("\n    "+e._s(e.$t("core.searchOptions"))+"\n    "),i("i",{staticClass:"el-icon-caret-bottom"})])])},[],!1,null,"2a5aeee0",null);a.options.__file="index.vue";t.a=a.exports},N5aa:function(e,t,i){"use strict";var s=i("4d7F"),n=i.n(s),a=i("EUZL"),o=i.n(a),r={props:{beforeUpload:Function,onSuccess:Function,keys:{type:Array,default:function(){return null}}},data:function(){return{loading:!1,excelData:{header:null,results:null}}},methods:{generateData:function(e){var t=e.header,i=e.results;this.excelData.header=t,this.excelData.results=i,this.onSuccess&&this.onSuccess(this.excelData)},handleDrop:function(e){if(e.stopPropagation(),e.preventDefault(),!this.loading){var t=e.dataTransfer.files;if(1===t.length){var i=t[0];if(!this.isExcel(i))return this.$message.error("Only supports upload .xlsx, .xls, .csv suffix files"),!1;this.upload(i),e.stopPropagation(),e.preventDefault()}else this.$message.error("Only support uploading one file!")}},handleDragover:function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"},handleUpload:function(){this.$refs["excel-upload-input"].click()},handleClick:function(e){var t=e.target.files[0];t&&this.upload(t)},upload:function(e){(this.$refs["excel-upload-input"].value=null,this.beforeUpload)?this.beforeUpload(e)&&this.readerData(e):this.readerData(e)},readerData:function(e){var t=this,i=this;return this.loading=!0,new n.a(function(s,n){var a=new FileReader;a.onload=function(e){var n=e.target.result,a=t.fixData(n),r=o.a.read(btoa(a),{type:"base64"}),l=r.SheetNames[0],c=r.Sheets[l],d=t.getHeaderRow(c),h={};i.keys&&(h.header=i.keys);var u=o.a.utils.sheet_to_json(c,h);t.generateData({header:d,results:u}),t.loading=!1,s()},a.readAsArrayBuffer(e)})},fixData:function(e){for(var t="",i=0,s=10240;i<e.byteLength/s;++i)t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(i*s,i*s+s)));return t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(i*s)))},getHeaderRow:function(e){var t=[],i=o.a.utils.decode_range(e["!ref"]),s=void 0,n=i.s.r;for(s=i.s.c;s<=i.e.c;++s){var a=e[o.a.utils.encode_cell({c:s,r:n})],r="UNKNOWN "+s;a&&a.t&&(r=o.a.utils.format_cell(a)),t.push(r.toLowerCase())}return t},isExcel:function(e){return/\.(xlsx|xls|csv)$/.test(e.name)}}},l=(i("37fX"),i("KHd+")),c=Object(l.a)(r,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("input",{ref:"excel-upload-input",staticClass:"excel-upload-input",attrs:{type:"file",accept:".xlsx, .xls"},on:{change:e.handleClick}}),e._v(" "),i("div",{staticClass:"drop",on:{drop:e.handleDrop,dragover:e.handleDragover,dragenter:e.handleDragover}},[e._v("\n    "+e._s(e.$t("media.youtube.drop"))+"\n    "),i("el-button",{staticStyle:{"margin-left":"16px"},attrs:{loading:e.loading,size:"mini",type:"primary"},on:{click:e.handleUpload}},[e._v(e._s(e.$t("media.youtube.browser")))])],1)])},[],!1,null,"049cbbca",null);c.options.__file="index.vue";t.a=c.exports},Od0w:function(e,t,i){},OzhW:function(e,t,i){"use strict";var s=i("FyfS"),n=i.n(s),a={name:"ShowColumn",props:{headers:{type:Array,default:function(){return[]}}},methods:{onChangeShowColumn:function(){if(this.headers&&this.headers.length){var e="show_"+this.$route.name,t=[],i=!0,s=!1,a=void 0;try{for(var o,r=n()(this.headers);!(i=(o=r.next()).done);i=!0){var l=o.value;l.show&&l.prop&&t.push(l.prop)}}catch(e){s=!0,a=e}finally{try{!i&&r.return&&r.return()}finally{if(s)throw a}}localStorage.setItem(e,t.toString())}}}},o=(i("+quC"),i("KHd+")),r=Object(o.a)(a,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-popover",{attrs:{placement:"bottom",width:"300",trigger:"click"}},[i("el-table",{ref:"multipleTable",attrs:{data:e.headers}},[i("el-table-column",{attrs:{prop:"label",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.$t(t.row.label))+"\n      ")]}}])}),e._v(" "),i("el-table-column",{attrs:{width:"55",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{width:32,"active-color":"#3FAA61"},on:{input:e.onChangeShowColumn},model:{value:t.row.show,callback:function(i){e.$set(t.row,"show",i)},expression:"scope.row.show"}})]}}])})],1),e._v(" "),i("el-button",{staticClass:"show-collumn",attrs:{slot:"reference",size:"mini",type:"success",icon:"el-icon-setting",plain:""},slot:"reference"})],1)},[],!1,null,"7111cbb6",null);r.options.__file="index.vue";t.a=r.exports},RGKI:function(e,t,i){"use strict";var s=i("9CUv");i.n(s).a},Xjy0:function(e,t,i){"use strict";var s=i("P2sY"),n=i.n(s),a=i("gDS+"),o=i.n(a),r=i("QbLZ"),l=i.n(r),c=i("GQeE"),d=i.n(c),h=i("FyfS"),u=i.n(h),f=i("jWXv"),p=i.n(f),m=i("Kw5r"),g=i("Nlzp"),v=i("ZySA"),b=i("Q4Eu"),y=i("AX1P"),S=i("OzhW"),w=m.default.extend({components:{FilterPopover:y.a,ShowColumn:S.a},directives:{waves:v.a,permission:b.a},data:function(){return{valid:!0,submitloading:!1,activeSeach:!1,page:1,pages:1,pageSizeOpts:[5,10,20,30,50],perPage:20,itemTotal:0,itemCount:0,items:[],ids:[],pids:!1,editedIndex:-1,editedItem:{},defaultItem:{},fieldFilter:{},filterExtend:{},dialog:!1,columnDialog:!1,model:"",fetchLoad:!0,fetchWhenStartUp:!0,loading:!1,showFilter:!1,tbMaxHeight:400,submitState:!1,selected:new p.a,itemSelected:[],headers:[],currentViewItem:{}}},computed:{formTitle:function(){return-1===this.editedIndex?this.$t("core.create"):this.$t("core.edit")},pageParams:function(){return{page:this.page,pagesTotal:this.pages,perPage:this.perPage,itemCount:this.itemCount,itemTotal:this.itemTotal}}},watch:{$route:function(e,t){this.destroyed()}},created:function(){this.page=1,this.initData(),!0===this.fetchWhenStartUp&&this.fetchList()},mounted:function(){this.loadShowColumns(),this.afterMounted()},destroyed:function(){this.itemSelected=[],this.selected=new p.a},methods:{handleCurrentChange:function(e){this.page=e,this.fetchList()},initData:function(){},afterMounted:function(){},onChangeShowColumn:function(){if(this.headers&&this.headers.length){var e="show_"+this.$route.name,t=[],i=!0,s=!1,n=void 0;try{for(var a,o=u()(this.headers);!(i=(a=o.next()).done);i=!0){var r=a.value;r.show&&r.prop&&t.push(r.prop)}}catch(e){s=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(s)throw n}}localStorage.setItem(e,t.toString())}},loadShowColumns:function(){var e="show_"+this.$route.name,t=localStorage.getItem(e);if(t){var i=t.split(",");if(this.headers&&this.headers.length)for(var s=0;s<this.headers.length;s++)i.includes(this.headers[s].prop)?this.headers[s].show=!0:this.headers[s].show=!1}},refresh:function(){var e=this;this.$nextTick(function(){e.$router.replace({path:"/redirect"+e.$route.fullPath})})},triggerFilter:function(){this.page=1,this.selected=new p.a,this.fetchList(),this.$refs.filterContainer&&this.$refs.filterContainer.handleBlur()},computePage:function(e){this.pages=e.num_pages,this.itemTotal=e.count,this.itemCount=d()(e.results).length},fetchListCallback:function(){},getFilterParams:function(){var e={};for(var t in e=this.$refs.filterContainer?this.isShowFilterOptions()?l()({},this.fieldFilter,this.filterExtend):l()({},this.filterExtend,this.fieldFilter):l()({},this.fieldFilter))e.hasOwnProperty(t)&&"string"==typeof e[t]&&(e[t]=e[t].trim());return e.page_size=this.perPage,e},load_item_selected:function(){var e=this;void 0===e.$refs.mainTable?setTimeout(function(){e.load_item_selected()},1e3):e.items.forEach(function(t){e.itemSelected.indexOf(t.id)>=0&&e.$refs.mainTable.toggleRowSelection(t)})},fetchList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0;var i=this.getFilterParams();Object(g.e)(this.page,this.model,i).then(function(i){e.items=i.data.results,e.computePage(i.data),e.pids=e.checkAllSelected(),e.fetchListCallback(t),e.load_item_selected(),e.loading=!1},function(t){e.loading=!1,console.log(t)})},onChangePerPage:function(e){this.perPage=e,this.triggerFilter()},indexMethod:function(e){return this.perPage*(this.page-1)+e+1},toggleAllItem:function(){var e=this.items;for(var t in e)if(e.hasOwnProperty(t)){var i=this.ids.indexOf(e[t].id);this.pids?-1===i&&this.ids.push(e[t].id):-1!==i&&this.ids.splice(i,1)}},checkAllSelected:function(){var e=this.items;for(var t in e){if(e.hasOwnProperty(t))if(-1===this.ids.indexOf(e[t].id))return!1}return!0},toggleItem:function(e){var t=this.ids.indexOf(e);-1===t?this.ids.push(e):this.ids.splice(t,1),this.pids=this.checkAllSelected()},toggleAllSelect:function(){this.pids?this.pids=!1:this.pids=!0,this.toggleAllItem()},addItem:function(){var e=this;this.dialog=!0,this.dialog=!0,this.editedItem=JSON.parse(o()(this.defaultItem)),this.editedIndex=-1,this.addItemCallback(),this.$nextTick(function(){e.$refs.form.clearValidate()})},editItem:function(e){var t=this;this.$refs.detailPopover&&this.$refs.detailPopover.close(),this.dialog=!0,this.editedIndex=this.items.indexOf(e),this.editedItem=n()({},e),this.editItemCallback(),this.$nextTick(function(){t.$refs.form.clearValidate()})},editItemCallback:function(){},addItemCallback:function(){},deleteItem:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=this.items.indexOf(e);this.$store.dispatch("confirmer/ask",{title:this.$t("confirm.delete.title"),body:this.$t("confirm.delete.body")+" "+i+"?"}).then(function(e){e&&Object(g.g)(t.items[n].id,t.model).then(function(e){t.$notify({type:"success",message:s||"Xoá dữ liệu thành công"}),t.fetchList(!0)},function(e){e.response&&e.response.data&&e.response.data.message?t.$notify({type:"error",message:e.response.data.message}):t.$notify({type:"error",message:"Xóa dữ liệu thất bại"})})})},deleteAllSelected:function(){var e=this,t={ids:this.ids};this.$store.dispatch("confirmer/ask",{title:"Xóa dữ liệu?",body:"Chú ý: Dữ liệu sẽ bị xóa và không thể phục hồi."}).then(function(i){i&&Object(g.h)(t,e.model).then(function(t){e.$notify({type:"success",message:t.data.message||"Xoá dữ liệu thành công"}),e.ids=[],e.fetchList()},function(t){e.$notify({type:"error",message:"Xóa dữ liệu thất bại"}),console.log(t)})})},close:function(){this.dialog=!1,this.imageData="",this.editedItem=n()({},this.defaultItem),this.fetchList()},validFormSubmit:function(){return!0},submitAddModel:function(){return this.model},submitUpdateModel:function(){return this.model},submitadd:function(){var e=this;!1!==this.validFormSubmit()&&Object(g.b)(this.editedItem,this.submitAddModel()).then(function(t){e.$notify({type:"success",message:"Thêm mới dữ liệu thành công"}),e.fetchList(),e.addItem()},function(t){console.log(t),e.close()})},submitAndNew:function(){this.submitadd()},resetForm:function(){this.$refs.form.resetFields()},getSubmitData:function(){return this.editedItem},beforeSubmit:function(){},submit:function(){var e=this,t=this;if(!1!==this.validFormSubmit()){var i=this.getSubmitData();this.$refs.form.validate().then(function(s){s&&(t.beforeSubmit(),t.submitloading=e.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e.editedIndex>-1?Object(g.i)(i,e.items[e.editedIndex].id,e.submitUpdateModel()).then(function(t){!1===t.success?e.$notify({type:"warn",message:t.message}):(e.$notify({type:"success",message:e.$t("core.update.success")}),e.close()),e.fetchList()},function(t){e.fetchList();var i=e.$t("core.update.err");t.response&&t.response.data&&t.response.data.message&&(i=t.response.data.message),e.$notify({type:"error",message:i}),console.log(t)}).then(function(){t.submitloading.close()}):Object(g.b)(i,e.submitAddModel()).then(function(t){e.$notify({type:"success",message:e.$t("core.createModel.success")}),e.fetchList(),e.close()},function(t){e.fetchList();var i=e.$t("core.createModel.err");t.response&&t.response.data&&t.response.data.message&&(i=t.response.data.message),e.$notify({type:"error",message:i})}).then(function(){t.submitloading.close()}))}).catch(function(e){console.error(e)})}},handleSelectionChange:function(e){this.ids=e.map(function(e){return e.id})},removeSelect:function(e){var t=this.itemSelected.indexOf(e);t>=0&&this.itemSelected.splice(t,1)},addSelect:function(e){this.itemSelected.indexOf(e)<0&&this.itemSelected.push(e)},handleSelectionAll:function(e){var t=this;this.items.forEach(function(i){0===e.length?t.removeSelect(i.id):t.addSelect(i.id)})},handleSelection:function(e,t){e.indexOf(t)>=0?this.addSelect(t.id):this.removeSelect(t.id)},handleSelect:function(e,t){e.find(function(e){return e.id===t.id})?this.addSelectItem(t):this.removeSelectItem(t),this.afterSelectedChange()},handleSelectAll:function(e){if(e.length){var t=!0,i=!1,s=void 0;try{for(var n,a=u()(this.items);!(t=(n=a.next()).done);t=!0){var o=n.value;this.addSelectItem(o)}}catch(e){i=!0,s=e}finally{try{!t&&a.return&&a.return()}finally{if(i)throw s}}}else{var r=!0,l=!1,c=void 0;try{for(var d,h=u()(this.items);!(r=(d=h.next()).done);r=!0){var f=d.value;this.removeSelectItem(f)}}catch(e){l=!0,c=e}finally{try{!r&&h.return&&h.return()}finally{if(l)throw c}}}this.afterSelectedChange()},addSelectItem:function(e){this.selected.add(e.id)},removeSelectItem:function(e){this.selected.delete(e.id)},afterSelectedChange:function(){},hideFilter:function(){var e=this.$refs.filterContainer;e&&e.$refs.filterPopover.handleBlur()},isShowFilterOptions:function(){var e=this.$refs.filterContainer;return!!e&&e.$refs.filterPopover.showPopper},showDetail:function(){this.$refs.detailPopover&&(this.$refs.detailPopover.getAttrs(this.currentViewItem),this.$refs.detailPopover.show())},closeDetail:function(){this.$refs.detailPopover&&this.$refs.detailPopover.close()},viewItem:function(e){this.currentViewItem=e,this.showDetail()}}});t.a=w},Z2sE:function(e,t,i){},kvWj:function(e,t,i){"use strict";var s=i("X4fA"),n={name:"Mediaupload",props:{folderId:{type:Number,default:null},multiple:{type:Boolean,default:!1},action:{type:String,default:""},accept:{type:String,default:""}},data:function(){return{uploadData:{},uploadHeaders:{},uploadUri:"",instanceMap:{},acceptExtension:""}},watch:{folderId:function(){this.getUploadData()}},mounted:function(){this.action?this.uploadUri=this.action:this.uploadUri="/api/v1/uploadfile",this.$store.getters.token&&(this.uploadHeaders.Authorization="JWT "+Object(s.a)()),this.getUploadData(),this.getAcceptExtension()},methods:{getUploadData:function(){this.folderId?this.uploadData={med_parent:this.folderId}:this.uploadData={}},getAcceptExtension:function(){this.accept?this.acceptExtension=this.accept:this.acceptExtension=" .jpg, .jpeg, .png, .bmp, .3gp, .mp4, .mkv, .txt, .gif"},onUploadProgress:function(e,t){},onError:function(e){},beforeUpload:function(e){return!(e.size>1073741824)||(this.$notify({message:this.$t("media.upload.exceedSize",{name:e.name}),type:"error",position:"bottom-right"}),!1)},refresh:function(){this.$emit("refresh")}}},a=(i("RGKI"),i("KHd+")),o=Object(a.a)(n,function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-wrapper"},[i("el-upload",{staticClass:"media-upload",attrs:{data:e.uploadData,headers:e.uploadHeaders,action:e.uploadUri,multiple:e.multiple,"before-upload":e.beforeUpload,accept:e.acceptExtension,"on-success":e.refresh,drag:""}},[i("div",{staticClass:"el-upload__text"},[i("div",{staticClass:"upload-text-drag"},[e._v(e._s(e.$t("media.drag.text")))]),e._v(" "),i("div",{staticClass:"upload-text-or"},[e._v(e._s(e.$t("media.drag.or")))]),e._v(" "),i("el-button",{staticClass:"choose-file-btn",attrs:{icon:"el-icon-upload"}},[e._v(e._s(e.$t("media.chooseFile")))]),e._v(" "),i("div",{staticClass:"upload-text-or"},[e._v(e._s(e.$t("media.drag.tip")))])],1)])],1)},[],!1,null,null,null);o.options.__file="mediaupload.vue";t.a=o.exports},wlw9:function(e,t,i){}}]);